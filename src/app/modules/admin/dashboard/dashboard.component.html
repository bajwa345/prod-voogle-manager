<div class="flex flex-col flex-auto min-w-0">

    <!-- Header -->
    <div class="bg-card">
        <div class="flex flex-col w-full max-w-screen-xl mx-auto px-6 sm:px-8">
            <div class="flex flex-col sm:flex-row flex-auto sm:items-center min-w-0 my-6 sm:my-10 dir-rtl">
                <!-- Avatar and name -->
                <div class="flex flex-auto items-center min-w-0">
                    <div class="flex-0 w-28 h-28 rounded-full overflow-hidden">
                        <img class="w-full h-full object-cover" onerror='this.style.display = "none"' src="{{user.avatar}}">
                    </div>
                    <div class="flex flex-col min-w-0 mr-4">
                        <ng-container>
                            <div class="urdu text-5xl md:text-8xl font-semibold tracking-tight leading-7 md:leading-snug truncate">{{user.candidate}}</div>
                        </ng-container>
                        <div class="flex items-center">
                            <div class="mt-1 ml-1.5 leading-6 text-2xl text-secondary urdu"> {{user.candidatedetail}} <span class="px-2"></span> {{user.candidatedetailarea}} </div>
                        </div>
                    </div>
                </div>
                <!-- Actions -->
                <div class="flex items-center mt-6 sm:mt-0 sm:ml-2 space-x-3 dir-ltr">
                    <div class="flex-0 h-26 overflow-hidden mr-8">
                        <img class="h-26 object-cover" onerror='this.style.display = "none"' src="assets/images/party-symbols/{{user.symbol}}.png">
                    </div>

                    <!--<button
                        class="fuse-mat-button-rounded bg-primary-400"
                        mat-flat-button
                        [color]="'primary'"
                        (click)="settings()">
                        <mat-icon
                            class="icon-size-5"
                            [svgIcon]="'heroicons_solid:cog'"></mat-icon>
                        <span class="ml-2">Settings</span>
                    </button>-->
                </div>
            </div>
        </div>
    </div>

    <!-- Main -->
    <div class="flex-auto border-t -mt-px pt-4 sm:pt-6">
        <div class="w-full max-w-screen-xl mx-auto">
            <!-- Tabs -->
            <mat-tab-group
                class="sm:px-2"
                [animationDuration]="'0'">

                <!-- Home -->
                <mat-tab label="General Stats">
                    <ng-template matTabContent>
                        <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-6 w-full min-w-0">
                            <div class="flex flex-col flex-auto p-7 bg-card shadow rounded-2xl overflow-hidden">
                                <div class="flex flex-col items-center">
                                    <div class="text-7xl sm:text-8xl font-bold tracking-tight leading-none text-blue-500">{{data.stats.st_polling_stations}}</div>
                                    <div class="text-lg font-medium text-blue-600 dark:text-blue-500">Polling Stations</div>
                                </div>
                            </div>
                            <div class="flex flex-col flex-auto p-7 bg-card shadow rounded-2xl overflow-hidden">
                                <div class="flex flex-col items-center">
                                    <div class="text-7xl sm:text-8xl font-bold tracking-tight leading-none text-red-500">{{data.stats.st_block_codes}}</div>
                                    <div class="text-lg font-medium text-red-600 dark:text-red-500">Block codes</div>
                                </div>
                            </div>
                            <div class="flex flex-col flex-auto p-7 bg-card shadow rounded-2xl overflow-hidden">
                                <div class="flex flex-col items-center">
                                    <div class="text-7xl sm:text-8xl font-bold tracking-tight leading-none text-amber-500">{{data.stats.st_polling_agents}}</div>
                                    <div class="text-lg font-medium text-amber-600 dark:text-amber-500">Polling Agents</div>
                                </div>
                            </div>
                            <div class="flex flex-col flex-auto p-7 bg-card shadow rounded-2xl overflow-hidden">
                                <div class="flex flex-col items-center">
                                    <div class="text-7xl sm:text-8xl font-bold tracking-tight leading-none text-green-600">{{data.stats.st_app_users}}</div>
                                    <div class="text-lg font-medium text-green-700 dark:text-green-600">App Users</div>
                                </div>
                            </div>

                            <div class="flex flex-col flex-auto bg-card shadow rounded-2xl overflow-hidden">
                                <div class="col-span-3 sm:col-span-1 items-center justify-center py-8 px-1 bg-green-500 text-white dark:bg-white dark:bg-opacity-5">
                                    <div class="text-5xl font-semibold leading-none text-center tracking-tight">{{data.stats.st_total_voters ? data.stats.st_total_voters.toLocaleString() : 0}}</div>
                                    <div class="mt-1 text-md font-medium text-center">Total Voters</div>
                                </div>
                            </div>
                            <div class="flex flex-col flex-auto bg-card shadow rounded-2xl overflow-hidden">
                                <div class="col-span-3 sm:col-span-1 items-center justify-center py-8 px-1 bg-orange-500 text-white dark:bg-white dark:bg-opacity-5">
                                    <div class="text-5xl font-semibold leading-none text-center tracking-tight">{{data.stats.st_total_families ? data.stats.st_total_families.toLocaleString() : '--'}}</div>
                                    <div class="mt-1 text-md font-medium text-center">Total Families</div>
                                </div>
                            </div>
                            <div class="flex flex-col flex-auto bg-card shadow rounded-2xl overflow-hidden">
                                <div class="col-span-3 sm:col-span-1 items-center justify-center py-8 px-1 bg-blue-500 text-white dark:bg-white dark:bg-opacity-5">
                                    <div class="text-5xl font-semibold leading-none text-center tracking-tight">{{data.stats.st_male_voters ? data.stats.st_male_voters.toLocaleString() : 0}}</div>
                                    <div class="mt-1 text-md font-medium text-center">Male Voters</div>
                                </div>
                            </div>
                            <div class="flex flex-col flex-auto bg-card shadow rounded-2xl overflow-hidden">
                                <div class="col-span-3 sm:col-span-1 items-center justify-center py-8 px-1 bg-amber-500 text-white dark:bg-white dark:bg-opacity-5">
                                    <div class="text-5xl font-semibold leading-none text-center tracking-tight">{{data.stats.st_female_voters ? data.stats.st_female_voters.toLocaleString() : 0}}</div>
                                    <div class="mt-1 text-md font-medium text-center">Female Voters</div>
                                </div>
                            </div>

                            <!-- Door to Door Campaign Summary -->
                            <div class="sm:col-span-2 md:col-span-4 flex flex-col flex-auto p-6 bg-card shadow rounded-2xl overflow-hidden">
                                <div class="flex flex-col sm:flex-row items-start justify-between">
                                    <div class="text-lg font-medium tracking-tight leading-6 truncate">Door to Door Campaign Progress (This Week)</div>
                                    <div class="mt-3 sm:mt-0 sm:ml-2">
                                        <mat-button-toggle-group
                                            value="phone-stats"
                                            #reachabilityStatsWeekSelector="matButtonToggleGroup">
                                            <mat-button-toggle value="locs-stats">Locations Updates</mat-button-toggle>
                                            <mat-button-toggle value="phone-stats">Phone Number Updates</mat-button-toggle>
                                        </mat-button-toggle-group>
                                    </div>
                                </div>
                                <div class="grid grid-cols-3 lg:grid-cols-3 grid-flow-row gap-6 w-full mt-8 sm:mt-4">
                                    <div class="flex flex-col flex-auto col-span-2">
                                        <div class="flex flex-col flex-auto">
                                            <apx-chart
                                                class="flex-auto w-full h-80"
                                                [chart]="reachabilityChart.chart"
                                                [colors]="reachabilityChart.colors"
                                                [dataLabels]="reachabilityChart.dataLabels"
                                                [grid]="reachabilityChart.grid"
                                                [labels]="reachabilityChart.labels"
                                                [legend]="reachabilityChart.legend"
                                                [plotOptions]="reachabilityChart.plotOptions"
                                                [series]="reachabilityChart.series[reachabilityStatsWeekSelector.value]"
                                                [states]="reachabilityChart.states"
                                                [stroke]="reachabilityChart.stroke"
                                                [tooltip]="reachabilityChart.tooltip"
                                                [xaxis]="reachabilityChart.xaxis"
                                                [yaxis]="reachabilityChart.yaxis"></apx-chart>
                                        </div>
                                    </div>
                                    <!-- Overview -->
                                    <div class="flex flex-col col-span-1">
                                        <div class="flex-auto grid grid-cols-2 gap-4 mt-6">
                                            <div class="col-span-2 flex flex-col items-center justify-center py-6 px-1 rounded-2xl bg-green-50 text-green-800 dark:bg-white dark:bg-opacity-5 dark:text-green-500">
                                                <div class="text-5xl sm:text-7xl font-semibold leading-none tracking-tight">
                                                    {{data.reachabilityStats.overview[reachabilityStatsWeekSelector.value]['voters']}}
                                                </div>
                                                <div class="mt-1 text-sm sm:text-md font-medium">Voters Reached</div>
                                            </div>
                                            <div class="col-span-2 flex flex-col items-center justify-center py-6 px-1 rounded-2xl bg-gray-100 text-secondary dark:bg-white dark:bg-opacity-5">
                                                <div class="text-5xl sm:text-7xl font-semibold leading-none tracking-tight">
                                                    {{data.reachabilityStats.overview[reachabilityStatsWeekSelector.value]['families']}}
                                                </div>
                                                <div class="mt-1 text-sm sm:text-md font-medium">Families Reached</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </ng-template>
                </mat-tab>

                <!-- Complaints -->
                <mat-tab label="Reported Complaints">
                    <ng-template matTabContent>
                        <div class="grid grid-cols-1 sm:grid-cols-6 gap-6 w-full min-w-0">
                            <!-- Complaints distribution -->
                            <div class="sm:col-span-6 flex flex-col flex-auto p-2 bg-card shadow rounded-2xl overflow-hidden" style="width: 100%; height: 480px;">
                                <iframe class="imapframe" frameborder="0" scrolling="no" marginheight="0" marginwidth="0" id="gmap_canvas" src="https://maps.google.com/maps?width=990&height=420&hl=en&q=31.520370,74.358749&t=&z=12&ie=UTF8&iwloc=&output=embed"></iframe><script type='text/javascript' src='https://embedmaps.com/google-maps-authorization/script.js?id=63dc609237ea4eac295db70898fd702268efb054'></script>
                            </div>

                            <!-- Complaints details -->
                            <div class="sm:col-span-6 flex flex-col flex-auto p-6 bg-card shadow rounded-2xl overflow-hidden">
                                <div class="text-lg font-medium tracking-tight leading-6 truncate">Reported Complaints</div>
                                <div class="flex flex-col flex-auto mt-2 overflow-x-auto">
                                    <table
                                        class="min-w-240 overflow-y-visible"
                                        mat-table
                                        [dataSource]="data.complainDetails.rows">

                                        <!-- Remaining amount -->
                                        <ng-container matColumnDef="report_time">
                                            <th class="px-3"
                                                mat-header-cell
                                                *matHeaderCellDef>
                                                Report Time
                                            </th>
                                            <td mat-cell *matCellDef="let complaint" class="px-3">
                                                {{complaint.report_time | date: 'medium'}}
                                            </td>
                                        </ng-container>

                                        <!-- Type -->
                                        <ng-container
                                            matColumnDef="type"
                                            sticky>
                                            <th class="px-3" mat-header-cell *matHeaderCellDef>
                                                Type
                                            </th>
                                            <td mat-cell *matCellDef="let complaint" class="px-3">
                                                <span class="flex items-center">
                                                    <span
                                                        class="w-2 h-2 rounded-full"
                                                        [ngClass]="{'bg-blue-500': complaint.type_id === 1,
                                                                    'bg-red-500': complaint.type_id === 2,
                                                                    'bg-green-500': complaint.type_id === 3,
                                                                    'bg-amber-500': complaint.type_id === 4,
                                                                    'bg-indigo-500': complaint.type_id === 5}"></span>
                                                    <span class="ml-3 leading-7 urdu font-semibold text-xl">{{complaint.type}}</span>
                                                </span>
                                            </td>
                                        </ng-container>

                                        <!-- Total -->
                                        <ng-container matColumnDef="area">
                                            <th class="px-3"
                                                mat-header-cell
                                                *matHeaderCellDef>
                                                Area
                                            </th>
                                            <td mat-cell *matCellDef="let complaint" class="px-3"
                                                [class.urdu]="this._sharedService.isEnglishString(complaint.area) == false"
                                                [class.text-lg]="this._sharedService.isEnglishString(complaint.area) == false"
                                                [class.font-semibold]="this._sharedService.isEnglishString(complaint.area) == false">
                                                {{complaint.area}}
                                            </td>
                                        </ng-container>

                                        <!-- Expenses amount -->
                                        <ng-container matColumnDef="complainent">
                                            <th class="px-3"
                                                mat-header-cell
                                                *matHeaderCellDef>
                                                Complainant
                                            </th>
                                            <td mat-cell *matCellDef="let complaint" class="px-3">
                                                {{complaint.complainent}}
                                            </td>
                                        </ng-container>

                                        <!-- Expenses percentage -->
                                        <ng-container matColumnDef="mobile">
                                            <th class="px-3"
                                                mat-header-cell
                                                *matHeaderCellDef>
                                                Contact #
                                            </th>
                                            <td mat-cell *matCellDef="let complaint" class="px-3">
                                                {{_sharedService.formatMobile(complaint.mobile)}}
                                            </td>
                                        </ng-container>

                                        <!-- Remaining percentage -->
                                        <ng-container matColumnDef="status">
                                            <th class="px-3"
                                                mat-header-cell
                                                *matHeaderCellDef>
                                                Status
                                            </th>
                                            <td mat-cell *matCellDef="let complaint" class="px-3">
                                                <span class="flex items-center">
                                                    <span>
                                                        <!-- Low -->
                                                        <span
                                                            class="flex items-end w-1 h-6 bg-red-200 rounded overflow-hidden"
                                                            *ngIf="complaint.status == 'unresolved'">
                                                            <span class="flex w-full h-1/3 bg-red-600"></span>
                                                        </span>
                                                        <!-- High -->
                                                        <span
                                                            class="flex items-end w-1 h-6 bg-green-100 rounded overflow-hidden"
                                                            *ngIf="complaint.status == 'resolved'">
                                                            <span class="flex w-full h-full bg-green-400"></span>
                                                        </span>
                                                    </span>
                                                    <span class="ml-3 leading-7">{{complaint.status}}</span>
                                                </span>
                                            </td>
                                        </ng-container>

                                        <!-- Expenses percentage -->
                                        <ng-container matColumnDef="actions">
                                            <th
                                                mat-header-cell
                                                *matHeaderCellDef></th>
                                            <td
                                                mat-cell
                                                *matCellDef="let complaint">
                                                <button class="px-1 py-3 mx-0.5 text-sm text-primary-800 bg-primary-100 dark:text-primary-50 dark:bg-primary-500 list-btn"
                                                mat-flat-button *ngIf="complaint.status == 'unresolved'">Confirm Resolve</button>
                                            </td>
                                        </ng-container>

                                        <tr
                                            mat-header-row
                                            *matHeaderRowDef="this.data.complainDetails.columns"></tr>
                                        <tr
                                            mat-row
                                            *matRowDef="let row; columns: this.data.complainDetails.columns;"></tr>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </ng-template>
                </mat-tab>

            </mat-tab-group>
        </div>
    </div>

</div>
